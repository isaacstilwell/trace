# Week 5 checkpoint

My goals for week 5 were as follows

1. Work with traceroute and IP location APIs to obtain a list of ping locations for each part of a traceroute. Figure out a deterministic way to use IP locations to find plausible physical locations (like datacenter addresses) for this to work.

2. Set up backend to be able to call traceroute (or similar function, since I'm not sure if traceroute can only be run in a terminal) and obtain and parse ip-related information for its results (i.e. longitude, latitude, etc of every IP address in traceroute output)

3. Figure out which packages etc. to use to be able to render a map/globe and get a basic map set up. It doesn't need to render the locations or look great, but I need to know that it works.

My status for each:

1. I was able to do this to a certain extent. For sites like google.com, this works, but certain hosts don't send packets back for traceroute requests. For instance, `traceroute netflix.com` and `traceroute amazon.com` both hang because they are hosted on AWS. I was able to get these routes working using `sudo tcptraceroute`, but I didn't find a clean way to run a server with root access without security risks. This will be one of the main things I need to look into before the next checkpoint. After a decent bit of research, I did figure out a way to find plausible locations for IP addresses using IP-Api to get location and some other data for a given IP address, and PeeringDB to get network facilities based on the ASN from the IP address. I'm a little ahead of schedule in implementing the logic for this, since I was just planning on coming up with the general logic for it originally, and I've actually implemented a lot of it in the `backend/ip_location.py` file. You can take a look at my logic there. All that's really left for this specific part is handling edge cases when api calls fail for peeringDB or IP-api and getting the frontend set up so that I can send the locations over. I'm sure there will be more edge cases that I haven't run into, so I wouldn't consider this done by any means, but it's closer to my week 7 checkpoint than I was aiming for.

2. I did this in `backend/traceroute.py` using the default traceroute command (or tracert for windows), but I want to make it work with some kind of tcp traceroute instead, since it gets better results on sites like netflix and amazon.com than the normal traceroute. I've looked in a couple of places for this, and so far, every tcp traceroute I've tried requires root access. I'll be looking into this more ASAP, but I'm also wondering if whichever experienced person reading this knows of an easy way to get by this root access issue (or conveniently knows another traceroute). As mentioned in part 1, I am doing the second part of this and more - I get the latitude and longitude for a given IP address AND find the datacenter associated with it.

3. I'm a little bit behind on this since I spent more time implementing the logic for peeringDB. I set up a vite project and I have `/frontend/frontend/index.html` displaying a globe based in GlobeJS, which I think is just an implementation of ThreeJS. I'm thinking I'll use this globe view to zoom out and in between locations that are far away (maybe not on dark mode, though - this was just something that was in the code I pulled in that I haven't played with much yet). In the `/frontend/frontend/map.html` file, I'm using OSMBuildings to do a basic 3D map. I looked through their docs and it seems pretty promising for doing the kind of visualization I want. You can take a look at both of these by cd'ing into `frontend`, then running `npm run dev`, then visiting http://localhost:5173/ and http://localhost:5173/map. My goal for this week was really just to get these components up and running. Changing the longitude and latitude that are displayed on the map is simple enough, and changing the rotation of the globe is even simplier, which is ~75% of what I'll be needing for this project, so I consider this a success overall.